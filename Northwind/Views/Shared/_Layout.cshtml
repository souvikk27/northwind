<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>@ViewData["Title"] - Northwind</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true"/>
    <link rel="stylesheet" href="~/css/styles.css" asp-append-version="true">
    <link rel="stylesheet" href="~/lib/font-awesome/css/font-awesome.css"/>
</head>
<body>
<header>
    <!-- component -->
    <nav class="w-100 bg-indigo-500 px-8 shadow shadow-gray-300 md:px-auto">
        <div class="container mx-auto flex h-28 flex-wrap items-center justify-between md:h-16 md:px-4 md:flex-nowrap">
            <!-- Logo -->
            <div class="text-white md:order-1">
                <a class="metal-mania text-3xl" asp-action="Index" asp-controller="Home">Northwind</a>
            </div>
            @if (User.Identity is {IsAuthenticated: true })
            {
                <div class="order-3 w-full text-gray-200 md:w-auto md:order-2">
                    <ul class="flex justify-between font-semibold">
                        <!-- Active Link = text-indigo-500
                        Inactive Link = hover:text-indigo-500 -->
                        <li class="text-white md:px-4 md:py-2">
                            <a href="#">Dashboard</a>
                        </li>
                        <li class="hover:text-white md:px-4 md:py-2">
                            <a asp-action="Index" asp-controller="Customers">Customers</a>
                        </li>
                        <li class="relative hover:text-white md:px-4 md:py-2">
                            <button class="dropdown-toggle cursor-pointer" id="userManagementDropdown">User Management</button>
                            <div class="dropdown-menu absolute mt-5 hidden w-48 rounded-lg bg-white shadow-md" id="userManagementMenu">
                                <ul>
                                    <li>
                                        <a href="/Roles/Index" class="block px-4 py-2 text-gray-800 hover:bg-gray-200">Manage Roles</a>
                                    </li>
                                    <li>
                                        <a href="/Users/Index" class="block px-4 py-2 text-gray-800 hover:bg-gray-200">Manage Users</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="hover:text-white md:px-4 md:py-2">
                            <a href="#">About</a>
                        </li>
                        <li class="hover:text-white md:px-4 md:py-2">
                            <a href="#">Contact</a>
                        </li>
                    </ul>
                </div>
            }
            <div class="order-2 md:order-3">
                @if (User.Identity is {IsAuthenticated: true })
                {
                    <form method="post" asp-action="Logout" asp-controller="Auth">
                        <button type="submit" class="flex items-center gap-2 rounded-xl bg-gray-100 px-4 py-2 text-indigo-500 hover:bg-white">
                            <!-- Heroicons - Logout Solid -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 4.586L6.707 7.879a1 1 0 11-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 11-1.414 1.414L10 4.586zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                <path fill-rule="evenodd" d="M4.293 14.293a1 1 0 011.414-1.414L10 16.586l4.293-4.707a1 1 0 111.414 1.414l-5 5a1 1 0 01-1.414 0l-5-5z" clip-rule="evenodd"/>
                            </svg>
                            <span>Logout</span>
                        </button>
                    </form>
                }
                else
                {
                    <form method="get" asp-action="Login" asp-controller="Auth">
                        <button type="submit" class="flex items-center gap-2 rounded-xl bg-gray-100 px-4 py-2 text-indigo-500 hover:bg-white">
                            <!-- Heroicons - Login Solid -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            <span>Login</span>
                        </button>
                    </form>
                }
            </div>
        </div>
    </nav>
</header>
<main class="min-h-screen flex-grow bg-gray-100">
    <div class="relative isolate px-6 pt-14 lg:px-8">
        @RenderBody()
    </div>
</main>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Toggle visibility of dropdown menu
            var dropdownToggle = document.getElementById('userManagementDropdown');
            var dropdownMenu = document.getElementById('userManagementMenu');

            dropdownToggle.addEventListener('click', function () {
                dropdownMenu.classList.toggle('hidden');
            });
        });
    </script>
<script src="~/js/site.js" asp-append-version="true"></script>
@await RenderSectionAsync("Scripts", required: false)
</body>
</html>